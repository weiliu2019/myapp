(function(e){function t(t){for(var r,o,l=t[0],c=t[1],s=t[2],f=0,u=[];f<l.length;f++)o=l[f],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&u.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(u.length)u.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,l=1;l<n.length;l++){var c=n[l];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={form_detail:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var d=c;i.push([14,"chunk-vendors","chunk-common"]),n()})({14:function(e,t,n){e.exports=n("fc62")},"29a4":function(e,t,n){"use strict";var r=n("ac49"),a=n.n(r);a.a},ac49:function(e,t,n){},fc62:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page",{ref:"page",staticClass:"plan-form-page common-page",attrs:{headerHeightVW:e.headerHeightVW,scrollbar:""},on:{"on-ready":e.onReady,"on-show":e.onShow}},[n("van-nav-bar",{attrs:{slot:"header",id:"header",title:e.formConfig.title,"left-arrow":""},on:{"click-left":e.onClickLeft},slot:"header"}),n("van-cell-group",{staticClass:"plan-form-list"},e._l(e.formConfig.data,(function(t){return n("div",{key:t.id,staticClass:"plan-item"},[t.title?n("div",{staticClass:"title"},[e._v(e._s(t.title))]):e._e(),e._l(t.list,(function(t,r){return n("div",{key:r,staticClass:"plan-item-li"},[n("div",{staticClass:"li-title"},[e._v(e._s(r+1)+"、"+e._s(t.title))]),n("div",{staticClass:"li-content"},[e._v(e._s(t&&t.content))]),n("div",{staticClass:"li-result"},[n("van-radio-group",{attrs:{disabled:e.readonly},model:{value:t.result,callback:function(n){e.$set(t,"result",n)},expression:"content.result"}},[n("van-radio",{attrs:{name:"normal"}},[e._v("正常")]),n("van-radio",{attrs:{name:"abnormal"}},[e._v("异常")]),n("van-radio",{attrs:{name:"not"}},[e._v("不涉及")])],1)],1)])}))],2)})),0),n("van-cell-group",[n("van-cell",{staticClass:"detail-title",attrs:{title:"备注（非必填）"}}),n("van-field",{attrs:{placeholder:"请输入现象",type:"textarea",rows:2,autosize:""},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),n("van-cell-group",[n("van-cell",{staticClass:"detail-title",attrs:{title:"故障记录"}}),e._l(e.formConfig.faultList,(function(t,r){return n("van-cell",{key:r,attrs:{title:t.deviceName+" "+t.deviceNo,"is-link":"",clickable:""},on:{click:function(n){return e.handleRecord(t,r)}}})}))],2),n("div",{staticClass:"blank-empty"}),n("template",{slot:"blank"},[e.readonly?e._e():n("div",{staticClass:"footer-action"},[n("van-button",{staticClass:"action-item-main btn-save",attrs:{color:"rgba(16, 142, 233, 0.15)"},on:{click:e.handleAddRecord}},[e._v("记录故障")]),n("van-button",{staticClass:"action-item-main",attrs:{color:"#108EE9"},on:{click:e.handleSave}},[e._v("保存")])],1)])],2)},a=[],i=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("bd86")),o=n("9973"),l=n("c03e"),c=n("365c"),s=n("8149");n("698a"),n("08f3");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={components:{Page:o["a"]},data:function(){return{headerHeightVW:0,id:null,index:null,title:"",formConfig:{},radio:"",remark:"",readonly:!1}},methods:{onReady:function(e,t){this.header=e,this.headerHeightVW=100*(this.header.h+1)/this.header.w,this.id=l["a"].getParam("id"),this.index=l["a"].getParam("index")||0,this.readonly=l["a"].getParam("readonly")||!1,this.loadForm()},onShow:function(){this.loadForm()},onClickLeft:function(){l["a"].back()},loadForm:function(){var e=this;s["a"].getOrderDetail(this.id).then((function(t){t.id?(e.formConfig=f({},t.formList[e.index]),console.log(JSON.stringify(e.formConfig))):c["a"].getPlanDetail({id:e.id}).then((function(t){e.formConfig=f({},t.formList[e.index]),console.log(JSON.stringify(e.formConfig))}))}))},handleAddRecord:function(){l["a"].open("plan_record",{id:this.id,index:this.index,editIndex:-1})},handleRecord:function(e,t){l["a"].open("plan_record",{id:this.id,index:this.index,deviceId:e.deviceId,deviceName:e.deviceName,deviceNo:e.deviceName,editIndex:t,remark:e.remark})},handleSave:function(){var e=this;s["a"].getOrderDetail(this.id).then((function(t){for(var n="executed",r=0;r<e.formConfig.data.length;r++){for(var a=e.formConfig.data[r].list,i=0;i<a.length;i++)if(!a[i].result){n="doing";break}if("doing"==n)break}t.formList[e.index]=f({},e.formConfig,{status:n,remark:e.remark}),s["a"].updateOrder(f({},t)).then((function(){l["a"].back()}))}))}}},p=u,v=(n("29a4"),n("2877")),h=Object(v["a"])(p,r,a,!1,null,null,null),m=h.exports,g=n("a1db");g["a"].init(m)}});
//# sourceMappingURL=form_detail.3b98754f.js.map