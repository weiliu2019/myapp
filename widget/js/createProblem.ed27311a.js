(function(e){function t(t){for(var o,s,r=t[0],c=t[1],l=t[2],h=0,u=[];h<r.length;h++)s=r[h],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&u.push(n[s][0]),n[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);m&&m(t);while(u.length)u.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],o=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=i[0]))}return e}var o={},n={createProblem:0},a=[];function s(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=o,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(i,o,function(t){return e[t]}.bind(null,o));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var m=c;a.push([7,"chunk-vendors","chunk-common"]),i()})({1029:function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("f751"),i("097d");var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("page",{ref:"page",staticClass:"create-page common-page",attrs:{headerHeightVW:e.headerHeightVW,scrollbar:""},on:{"on-ready":e.onReady,"on-show":e.onShow}},[o("van-nav-bar",{attrs:{slot:"header",id:"header",title:"问题提报","left-arrow":""},on:{"click-left":e.onClickLeft},slot:"header"}),o("van-cell-group",[o("van-cell",{attrs:{required:"",title:"故障地点","is-link":"",clickable:""},on:{click:e.handleSelectLine}},[o("span",[e._v(e._s(e.line&&e.line.name)+" / "+e._s(e.station&&e.station.name))])]),o("van-field",{attrs:{placeholder:"请输入详细地址",type:"textarea",rows:2,autosize:""},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),o("van-cell",{attrs:{required:"",title:"发生时间","is-link":"",clickable:""},on:{click:e.handleSelectTime}},[o("span",[e._v(e._s(e.time))])])],1),o("van-cell-group",[o("van-cell",{attrs:{required:"",title:"所属专业","is-link":"",clickable:""},on:{click:e.handleSelectProfession}},[o("span",[e._v(e._s(e.profession&&e.profession.name))])]),o("van-cell",{attrs:{required:"",title:"故障设备分类","is-link":"",clickable:""},on:{click:e.handleSelectDeviceCategory}},[o("span",[e._v(e._s(e.deviceCategory&&e.deviceCategory.name))])]),o("van-field",{attrs:{label:"车组号",placeholder:"请输入车组号",disabled:!(e.profession&&("通信专业"==e.profession.name||"信号专业"==e.profession.name))},model:{value:e.carNo,callback:function(t){e.carNo=t},expression:"carNo"}}),o("van-cell",{attrs:{required:"",title:"问题分类","is-link":"",clickable:""},on:{click:e.handleSelectCategory}},[o("span",[e._v(e._s(e.category&&e.category.name))])]),o("van-cell",{attrs:{required:"",title:"问题等级","is-link":"",clickable:""},on:{click:e.handleSelectLevel}},[o("span",[e._v(e._s(e.level&&e.level.name))])]),o("van-cell",{attrs:{required:"",title:"问题来源","is-link":"",clickable:""},on:{click:e.handleSelectSource}},[o("span",[e._v(e._s(e.source&&e.source.name))])]),o("van-cell",{attrs:{required:"",title:"计划完成时间","is-link":"",clickable:""},on:{click:e.handleSelectFinishTime}},[o("span",[e._v(e._s(e.finishTime))])]),o("van-cell",{attrs:{title:"承包商","is-link":"",clickable:""},on:{click:e.handleSelectContractor}},[o("span",[e._v(e._s(e.contractor&&e.contractor.name))])]),o("van-cell",{attrs:{title:"通知承包商时间","is-link":"",clickable:""},on:{click:e.handleSelectNoticeTime}},[o("span",[e._v(e._s(e.contractorNoticeTime?e.contractorNoticeTime:"请选择"))])]),o("van-cell",{attrs:{title:"承包商答复时间","is-link":"",clickable:""},on:{click:e.handleSelectReplyTime}},[o("span",[e._v(e._s(e.contractorReplyTime?e.contractorReplyTime:"请选择"))])]),o("van-cell",{attrs:{title:"承包商开始工作时间","is-link":"",clickable:""},on:{click:e.handleSelectBeginTime}},[o("span",[e._v(e._s(e.contractorBeginTime?e.contractorBeginTime:"请选择"))])]),o("van-cell",{attrs:{title:"承包商完成工作时间","is-link":"",clickable:""},on:{click:e.handleSelectContractorFinishTime}},[o("span",[e._v(e._s(e.contractorFinishTime?e.contractorFinishTime:"请选择"))])]),o("van-field",{attrs:{label:"非维修时间：",placeholder:"请输入非维修时间"},model:{value:e.noRepairTime,callback:function(t){e.noRepairTime=t},expression:"noRepairTime"}}),o("van-cell",{attrs:{title:"故障修复时间","is-link":"",clickable:""},on:{click:e.handleSelectRepairTime}},[o("span",[e._v(e._s(e.repairFinishTime?e.repairFinishTime:"请选择"))])])],1),o("van-cell-group",[o("van-cell",{staticClass:"detail-title",attrs:{title:"问题简述："}}),o("van-field",{attrs:{placeholder:"请填写问题简述",type:"textarea",rows:2,autosize:""},model:{value:e.problemDesc,callback:function(t){e.problemDesc=t},expression:"problemDesc"}})],1),o("van-cell-group",[o("van-cell",{staticClass:"detail-title",attrs:{required:"",title:"现象描述："}}),o("van-field",{attrs:{placeholder:"请填写现象描述",type:"textarea",rows:2,autosize:""},model:{value:e.description2,callback:function(t){e.description2=t},expression:"description2"}})],1),o("van-cell-group",[o("van-cell",{staticClass:"detail-title",attrs:{required:"",title:"初步原因分析："}}),o("van-field",{attrs:{placeholder:"请填写初步原因分析",type:"textarea",rows:2,autosize:""},model:{value:e.analysis,callback:function(t){e.analysis=t},expression:"analysis"}})],1),o("van-cell-group",[o("van-cell",{staticClass:"detail-title",attrs:{required:"",title:"初步解决方案："}}),o("van-field",{attrs:{placeholder:"请填写初步解决方案",type:"textarea",rows:2,autosize:""},model:{value:e.beginSolutions,callback:function(t){e.beginSolutions=t},expression:"beginSolutions"}})],1),o("van-cell-group",[o("van-cell",{staticClass:"detail-title",attrs:{title:"图像："}}),o("div",{staticClass:"images-container"},[e._l(e.imageList,(function(t,i){return o("div",{key:i,staticClass:"image-item-show",on:{click:function(t){return e.handlePlayImages(i)}}},[o("auto-image",{staticStyle:{"margin-bottom":"12px","margin-left":"12px"},attrs:{src:t.url,width:108,height:108}}),o("div",{staticClass:"image-remove",on:{click:function(t){return t.stopPropagation(),e.handleImageRemove(i)}}})],1)})),o("div",{staticClass:"image-item",staticStyle:{background:"#fff"},on:{click:function(t){return t.stopPropagation(),e.handlePhoto1(t)}}},[o("img",{attrs:{src:i("4857")}})])],2)],1),o("van-cell-group",[o("van-cell",{staticClass:"detail-title",attrs:{title:"视频："}}),o("div",{staticClass:"images-container"},[e._l(e.videoList,(function(t,n){return o("div",{key:n,staticClass:"image-item-show",on:{click:function(i){return e.handlePlayVideo(t)}}},[o("img",{staticClass:"img-video",attrs:{src:i("f0f8")}}),o("div",{staticClass:"image-remove",on:{click:function(t){return t.stopPropagation(),e.handleVideoRemove(n)}}})])})),o("div",{staticClass:"image-item",staticStyle:{background:"#fff"},on:{click:function(t){return t.stopPropagation(),e.handlePhoto2(t)}}},[o("img",{attrs:{src:i("4857")}})])],2)],1),o("van-cell-group",[o("van-cell",{staticClass:"detail-title",attrs:{title:"附件："}}),o("div",{staticClass:"images-container"},[e._l(e.annexList,(function(t,n){return o("div",{key:n,staticClass:"image-item-show",on:{click:function(i){return e.handlePlayAnnex(t)}}},[o("img",{staticClass:"img-video",attrs:{src:i("2e6e")}}),o("div",{staticClass:"image-remove",on:{click:function(t){return t.stopPropagation(),e.handleAnnexRemove(n)}}})])})),o("div",{staticClass:"image-item",staticStyle:{background:"#fff"},on:{click:function(t){return t.stopPropagation(),e.handlePhoto3(t)}}},[o("img",{attrs:{src:i("4857")}})])],2)],1),o("div",{staticClass:"blank-empty"}),o("template",{slot:"blank"},[o("div",{staticClass:"footer-action"},[o("van-button",{staticClass:"action-item-main",on:{click:e.handleSave}},[e._v("保存")]),o("van-button",{staticClass:"action-item-main",attrs:{color:"#108EE9"},on:{click:e.handleSubmit}},[e._v("提交")])],1),o("van-popup",{staticClass:"filter-popup",attrs:{position:"bottom","lock-scroll":!1,closeable:"","close-icon":"close",round:""},model:{value:e.professionShow,callback:function(t){e.professionShow=t},expression:"professionShow"}},[o("div",{staticClass:"title"},[e._v("选择所属专业")]),e.professionShow?o("a-scroll",{ref:"filterScroller",staticClass:"filter-scroll"},[o("van-radio-group",{model:{value:e.professionRadio.id,callback:function(t){e.$set(e.professionRadio,"id",t)},expression:"professionRadio.id"}},[o("van-cell-group",e._l(e.professionOptions,(function(t,i){return o("van-cell",{key:i,attrs:{title:t.name,label:t.description,clickable:""},on:{click:function(i){e.professionRadio=Object.assign({},t)}}},[o("van-radio",{attrs:{slot:"right-icon",name:t.id},slot:"right-icon"})],1)})),1)],1)],1):e._e(),o("div",{staticClass:"footer-action"},[o("van-button",{staticClass:"action-item-main",attrs:{color:"#108EE9"},on:{click:e.onProfessionSelect}},[e._v("确定")])],1)],1),o("van-popup",{staticClass:"filter-popup",attrs:{position:"bottom","lock-scroll":!1,closeable:"","close-icon":"close",round:""},model:{value:e.sourceShow,callback:function(t){e.sourceShow=t},expression:"sourceShow"}},[o("div",{staticClass:"title"},[e._v("选择问题来源")]),e.sourceShow?o("a-scroll",{ref:"filterScroller",staticClass:"filter-scroll"},[o("van-radio-group",{model:{value:e.sourceRadio.id,callback:function(t){e.$set(e.sourceRadio,"id",t)},expression:"sourceRadio.id"}},[o("van-cell-group",e._l(e.sourceOptions,(function(t,i){return o("van-cell",{key:i,attrs:{title:t.name,label:t.description,clickable:""},on:{click:function(i){e.sourceRadio=Object.assign({},t)}}},[o("van-radio",{attrs:{slot:"right-icon",name:t.id},slot:"right-icon"})],1)})),1)],1)],1):e._e(),o("div",{staticClass:"footer-action"},[o("van-button",{staticClass:"action-item-main",attrs:{color:"#108EE9"},on:{click:e.onSourceSelect}},[e._v("确定")])],1)],1),o("van-popup",{staticClass:"filter-popup",attrs:{position:"bottom","lock-scroll":!1,closeable:"","close-icon":"close",round:""},model:{value:e.categoryShow,callback:function(t){e.categoryShow=t},expression:"categoryShow"}},[o("div",{staticClass:"title"},[e._v("选择问题分类")]),e.categoryShow?o("a-scroll",{ref:"filterScroller",staticClass:"filter-scroll"},[o("van-radio-group",{model:{value:e.categoryRadio.id,callback:function(t){e.$set(e.categoryRadio,"id",t)},expression:"categoryRadio.id"}},[o("van-cell-group",e._l(e.categoryOptions,(function(t,i){return o("van-cell",{key:i,attrs:{title:t.name,label:t.description,clickable:""},on:{click:function(i){e.categoryRadio=Object.assign({},t)}}},[o("van-radio",{attrs:{slot:"right-icon",name:t.id},slot:"right-icon"})],1)})),1)],1)],1):e._e(),o("div",{staticClass:"footer-action"},[o("van-button",{staticClass:"action-item-main",attrs:{color:"#108EE9"},on:{click:e.onCategorySelect}},[e._v("确定")])],1)],1),o("van-popup",{staticClass:"filter-popup",attrs:{position:"bottom","lock-scroll":!1,closeable:"","close-icon":"close",round:""},model:{value:e.contractorShow,callback:function(t){e.contractorShow=t},expression:"contractorShow"}},[o("div",{staticClass:"title"},[e._v("选择承包商")]),e.contractorShow?o("a-scroll",{ref:"filterScroller",staticClass:"filter-scroll"},[o("van-radio-group",{model:{value:e.contractorRadio.id,callback:function(t){e.$set(e.contractorRadio,"id",t)},expression:"contractorRadio.id"}},[o("van-cell-group",e._l(e.contractorOptions,(function(t,i){return o("van-cell",{key:i,attrs:{title:t.name,label:t.description,clickable:""},on:{click:function(i){e.contractorRadio=Object.assign({},t)}}},[o("van-radio",{attrs:{slot:"right-icon",name:t.id},slot:"right-icon"})],1)})),1)],1)],1):e._e(),o("div",{staticClass:"footer-action"},[o("van-button",{staticClass:"action-item-main",attrs:{color:"#108EE9"},on:{click:e.onContractorSelect}},[e._v("确定")])],1)],1),o("van-popup",{staticClass:"filter-popup",attrs:{position:"bottom","lock-scroll":!1,closeable:"","close-icon":"close",round:""},model:{value:e.levelShow,callback:function(t){e.levelShow=t},expression:"levelShow"}},[o("div",{staticClass:"title"},[e._v("选择问题等级")]),e.levelShow?o("a-scroll",{ref:"filterScroller",staticClass:"filter-scroll"},[o("van-radio-group",{model:{value:e.levelRadio.id,callback:function(t){e.$set(e.levelRadio,"id",t)},expression:"levelRadio.id"}},[o("van-cell-group",e._l(e.levelOptions,(function(t,i){return o("van-cell",{key:i,attrs:{title:t.name,label:t.description,clickable:""},on:{click:function(i){e.levelRadio=Object.assign({},t)}}},[o("van-radio",{attrs:{slot:"right-icon",name:t.id},slot:"right-icon"})],1)})),1)],1)],1):e._e(),o("div",{staticClass:"footer-action"},[o("van-button",{staticClass:"action-item-main",attrs:{color:"#108EE9"},on:{click:e.onLevelSelect}},[e._v("确定")])],1)],1),o("van-popup",{staticClass:"time-popup",attrs:{position:"bottom","lock-scroll":!1,round:""},model:{value:e.timeShow,callback:function(t){e.timeShow=t},expression:"timeShow"}},[o("van-datetime-picker",{attrs:{type:"datetime"},on:{confirm:e.handleConfirm,cancel:function(t){e.timeShow=!1}},model:{value:e.currentTime,callback:function(t){e.currentTime=t},expression:"currentTime"}})],1),o("van-popup",{staticClass:"time-popup",attrs:{position:"bottom","lock-scroll":!1,round:""},model:{value:e.finishTimeShow,callback:function(t){e.finishTimeShow=t},expression:"finishTimeShow"}},[o("van-datetime-picker",{attrs:{type:"datetime"},on:{confirm:e.handleFinishTimeConfirm,cancel:function(t){e.finishTimeShow=!1}},model:{value:e.currentTime,callback:function(t){e.currentTime=t},expression:"currentTime"}})],1),o("van-popup",{staticClass:"time-popup",attrs:{position:"bottom","lock-scroll":!1,round:""},model:{value:e.contractorReplyTimeShow,callback:function(t){e.contractorReplyTimeShow=t},expression:"contractorReplyTimeShow"}},[o("van-datetime-picker",{attrs:{type:"datetime"},on:{confirm:e.handleReplyTimeConfirm,cancel:function(t){e.contractorReplyTimeShow=!1}},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1),o("van-popup",{staticClass:"time-popup",attrs:{position:"bottom","lock-scroll":!1,round:""},model:{value:e.contractorBeginTimeShow,callback:function(t){e.contractorBeginTimeShow=t},expression:"contractorBeginTimeShow"}},[o("van-datetime-picker",{attrs:{type:"datetime"},on:{confirm:e.handleBeginTimeConfirm,cancel:function(t){e.contractorBeginTimeShow=!1}},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1),o("van-popup",{staticClass:"time-popup",attrs:{position:"bottom","lock-scroll":!1,round:""},model:{value:e.contractorFinishTimeShow,callback:function(t){e.contractorFinishTimeShow=t},expression:"contractorFinishTimeShow"}},[o("van-datetime-picker",{attrs:{type:"datetime"},on:{confirm:e.handleContractorFinishTimeConfirm,cancel:function(t){e.contractorFinishTimeShow=!1}},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1),o("van-popup",{staticClass:"time-popup",attrs:{position:"bottom","lock-scroll":!1,round:""},model:{value:e.repairFinishTimeShow,callback:function(t){e.repairFinishTimeShow=t},expression:"repairFinishTimeShow"}},[o("van-datetime-picker",{attrs:{type:"datetime"},on:{confirm:e.handleRepairTimeConfirm,cancel:function(t){e.repairFinishTimeShow=!1}},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1),o("van-popup",{staticClass:"time-popup",attrs:{position:"bottom","lock-scroll":!1,round:""},model:{value:e.contractorNoticeTimeShow,callback:function(t){e.contractorNoticeTimeShow=t},expression:"contractorNoticeTimeShow"}},[o("van-datetime-picker",{attrs:{type:"datetime"},on:{confirm:e.handleNoticeTimeConfirm,cancel:function(t){e.contractorNoticeTimeShow=!1}},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1),o("van-dialog",{attrs:{"show-cancel-button":"","before-close":e.beforeClose},model:{value:e.editShow,callback:function(t){e.editShow=t},expression:"editShow"}},[o("van-cell",{attrs:{title:"描述"}}),o("van-field",{ref:"desInput",attrs:{type:"textarea",clearable:!0},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1)],1)],2)},n=[],a=(i("1c01"),i("58b2"),i("8e6e"),i("f3e2"),i("ac6a"),i("456d"),i("20d6"),i("d25f"),i("bd86")),s=i("9973"),r=i("4e1b"),c=i("c03e"),l=i("4ff5"),m=i("8149"),h=i("365c"),u=i("c1df"),p=i.n(u),d=i("698a"),f=i("0e5c");function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var T={components:{Page:s["a"],AScroll:r["a"],AutoImage:l["a"]},data:function(){var e;return e={headerHeightVW:0,levelOptions:JSON.parse(localStorage.getItem("problem_level")),categoryOptions:JSON.parse(localStorage.getItem("problem_category")),professionOptions:JSON.parse(localStorage.getItem("problem_profession")),sourceOptions:JSON.parse(localStorage.getItem("problem_source")),contractorOptions:JSON.parse(localStorage.getItem("problem_contractor")),profession:null,source:null,level:null,device:null,category:null,deviceCategory:null,reason:null,contractor:null,reasonShow:!1,reasonRadio:null,sourceShow:!1,sourceRadio:null,categoryShow:!1,categoryRadio:null,levelShow:!1,levelRadio:null,professionShow:!1,professionRadio:null,contractorShow:!1,contractorRadio:null,imageList:[],videoList:[],annexList:[],UIPhotoViewer:null,editShow:!1,description:"",description2:"",problemDesc:"",imgFile:"",repairContent:"",repairRemark:"",currentTime:new Date,timeShow:!1,time:p()().format("YYYY-MM-DD HH:mm"),line:null,station:null,lineShow:!1,lineColumns:[],address:"",content:"",finishTimeShow:!1,finishTime:p()().format("YYYY-MM-DD HH:mm"),summary:""},Object(a["a"])(e,"description",""),Object(a["a"])(e,"analysis",""),Object(a["a"])(e,"beginSolutions",""),Object(a["a"])(e,"localId",null),Object(a["a"])(e,"imageFilter",null),Object(a["a"])(e,"videoCompression",null),Object(a["a"])(e,"carNo",""),Object(a["a"])(e,"contractorNoticeTime",""),Object(a["a"])(e,"contractorNoticeTimeShow",!1),Object(a["a"])(e,"contractorReplyTime",""),Object(a["a"])(e,"contractorReplyTimeShow",!1),Object(a["a"])(e,"contractorBeginTime",""),Object(a["a"])(e,"contractorBeginTimeShow",!1),Object(a["a"])(e,"contractorFinishTime",""),Object(a["a"])(e,"contractorFinishTimeShow",!1),Object(a["a"])(e,"noRepairTime",""),Object(a["a"])(e,"noRepairTimeShow",!1),Object(a["a"])(e,"repairFinishTime",""),Object(a["a"])(e,"repairFinishTimeShow",!1),Object(a["a"])(e,"fileBrowser",null),Object(a["a"])(e,"fileReader",null),e},methods:{onReady:function(e,t){var i=this;this.header=e,this.headerHeightVW=100*(this.header.h+1)/this.header.w,localStorage.setItem("address_select",""),localStorage.setItem("category_select","");var o=c["a"].getParam("detail");o&&m["a"].getMyProblemDetail(o).then((function(e){i.profession=e.profession,i.time=e.time,i.line=e.line,i.station=e.station,i.address=e.address,i.category=e.category,i.level=e.level,i.source=e.source,i.imageList=e.images,i.videoList=e.videos,i.annexList=e.annex,i.finishTime=e.finishTime,i.summary=e.summary,i.description2=e.description,i.problemDesc=e.problemDesc,i.analysis=e.analysis,i.beginSolutions=e.beginSolutions,i.localId=e.id,i.deviceCategory=e.deviceCategory,i.carNo=e.carNo,i.contractor=e.contractor,i.contractorNoticeTime=e.contractorNoticeTime,i.contractorReplyTime=e.contractorReplyTime,i.contractorBeginTime=e.contractorBeginTime,i.contractorFinishTime=e.contractorFinishTime,i.noRepairTime=e.noRepairTime,i.repairFinishTime=e.repairFinishTime}))},onShow:function(){if(localStorage.getItem("address_select")){var e=JSON.parse(localStorage.getItem("address_select"));this.line=e[0],this.station=e[e.length-1]}if(localStorage.getItem("category_select")){var t=JSON.parse(localStorage.getItem("category_select"));this.deviceCategory=t[t.length-1]}},onClickLeft:function(){this.$dialog.confirm({message:"返回数据将丢失，是否确认返回？",confirmButtonText:"确认",cancelButtonText:"取消"}).then((function(){c["a"].back()})).catch((function(){}))},handleSelectTime:function(){this.timeShow=!0},handleSelectFinishTime:function(){this.finishTimeShow=!0},handleSelectLine:function(){c["a"].open("address")},handleSelectDeviceCategory:function(){c["a"].open("deviceCategory",{profession:this.profession?this.profession.id:null})},handleConfirm:function(e){this.time=p()(e).format("YYYY-MM-DD HH:mm"),this.timeShow=!1},handleFinishTimeConfirm:function(e){this.finishTime=p()(e).format("YYYY-MM-DD HH:mm"),this.finishTimeShow=!1},handleSelectSource:function(){this.sourceShow=!0,this.sourceRadio=g({},this.reason)},onSourceSelect:function(){this.source=g({},this.sourceRadio),this.sourceShow=!1},handleSelectCategory:function(){var e=this;this.categoryShow=!0,this.categoryOptions=JSON.parse(localStorage.getItem("problem_category")).filter((function(t){return t.profession&&t.profession.findIndex((function(t){return e.profession&&t==e.profession.id}))>=0})),this.categoryRadio=g({},this.category)},onCategorySelect:function(){this.category=g({},this.categoryRadio),this.categoryShow=!1},handleSelectLevel:function(){var e=this;this.levelShow=!0,this.levelOptions=JSON.parse(localStorage.getItem("problem_level")).filter((function(t){return t.profession.findIndex((function(t){return e.profession&&t==e.profession.id}))>=0})),this.levelRadio=g({},this.level)},onLevelSelect:function(){this.level=g({},this.levelRadio),this.levelShow=!1},handleSelectProfession:function(){this.professionShow=!0,this.professionRadio=g({},this.profession)},onProfessionSelect:function(){this.profession=g({},this.professionRadio),this.professionShow=!1},handleSelectContractor:function(){this.contractorShow=!0,this.contractorRadio=g({},this.contractor)},onContractorSelect:function(){this.contractor=g({},this.contractorRadio),this.contractorShow=!1},handleReplyTimeConfirm:function(e){this.contractorReplyTime=p()(e).format("YYYY-MM-DD HH:mm"),this.contractorReplyTimeShow=!1},handleSelectReplyTime:function(){this.createTime=this.contractorReplyTime?new Date(this.contractorReplyTime):new Date,this.contractorReplyTimeShow=!0},handleSelectBeginTime:function(){this.createTime=this.contractorBeginTime?new Date(this.contractorBeginTime):new Date,this.contractorBeginTimeShow=!0},handleBeginTimeConfirm:function(e){this.contractorBeginTime=p()(e).format("YYYY-MM-DD HH:mm"),this.contractorBeginTimeShow=!1},handleSelectContractorFinishTime:function(){this.createTime=this.contractorFinishTime?new Date(this.contractorFinishTime):new Date,this.contractorFinishTimeShow=!0},handleContractorFinishTimeConfirm:function(e){this.contractorFinishTime=p()(e).format("YYYY-MM-DD HH:mm"),this.contractorFinishTimeShow=!1},handleSelectRepairTime:function(){this.createTime=this.repairFinishTime?new Date(this.repairFinishTime):new Date,this.repairFinishTimeShow=!0},handleRepairTimeConfirm:function(e){this.repairFinishTime=p()(e).format("YYYY-MM-DD HH:mm"),this.repairFinishTimeShow=!1},handleSelectNoticeTime:function(){this.createTime=this.contractorNoticeTime?new Date(this.contractorNoticeTime):new Date,this.contractorNoticeTimeShow=!0},handleNoticeTimeConfirm:function(e){this.contractorNoticeTime=p()(e).format("YYYY-MM-DD HH:mm"),this.contractorNoticeTimeShow=!1},handlePhoto1:function(){var e=this;api.actionSheet({buttons:["打开照相机","从相册获取"]},(function(t,i){var o=t.buttonIndex,n="";1===o?n="camera":2===o&&(n="album"),n&&api.getPicture({sourceType:n,destinationType:"url",preview:!0,quality:50,mediaValue:"pic"},(function(t,i){t.data&&(e.imgFile=t.data,e.description="",e.editShow=!0,setTimeout((function(){e.$refs.desInput.focus()}),200))}))}))},handlePhoto3:function(){var e=this;"android"==api.systemType&&(this.fileBrowser||(this.fileBrowser=api.require("selectFile")),this.fileBrowser.open((function(t){t.status?e.annexList.push({url:t.path}):alert("选择文件不存在")}))),"ios"==api.systemType&&(this.fileReader||(this.fileReader=api.require("fileReader")),this.fileReader.open((function(t){t.status&&e.fileReader.addEventListener({target:"select"},(function(t){t.urls.length&&e.annexList.push({url:t.urls[0]})}))})))},handlePhoto2:function(){var e=this;api.actionSheet({buttons:["打开照相机","从相册获取"]},(function(t,i){var o=t.buttonIndex,n="";1===o?n="camera":2===o&&(n="album"),n&&api.getPicture({sourceType:n,destinationType:"url",preview:!0,quality:100,mediaValue:"video",saveToPhotoAlbum:!0,videoQuality:"high"},(function(t,i){t.data&&("ios"==api.systemType?(e.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"正在压缩..."}),e.videoCompression||(e.videoCompression=api.require("videoCompression")),e.videoCompression.compression({path:t.data,quality:"medium"},(function(t,i){"completed"==t.eventType&&(e.videoList.push({url:t.path}),e.$toast.clear())}))):e.videoList.push({url:t.data}))}))}))},beforeClose:function(e,t){"confirm"===e?this.imageList.push({url:this.imgFile,description:this.description}):this.imageList.push({url:this.imgFile,description:""}),t()},handleVideoRemove:function(e){this.videoList.splice(e,1)},handleImageRemove:function(e){this.imageList.splice(e,1)},handlePlayVideo:function(e){api.openVideo({url:e.url})},handlePlayAnnex:function(e){c["a"].open("browser",{url:e.url})},handleAnnexRemove:function(e){this.annexList.splice(e,1)},handlePlayImages:function(e){localStorage.setItem("photos",JSON.stringify(this.imageList)),c["a"].open("photoViewer",{index:e})},handleSubmit:function(){var e=this;null==this.line||null==this.station||""==this.time||null==this.source||""==this.description2||""==this.analysis||""==this.beginSolutions||null==this.profession||null==this.category||null==this.level||""==this.finishTime||null==this.deviceCategory?this.$toast.fail("请填写所有必填项,可填写无"):(this.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"正在提交..."}),d["a"].connection()?Object(f["b"])(this.imageList).then((function(t){e.imageList=t,Object(f["c"])(e.videoList).then((function(t){e.videoList=t,Object(f["a"])(e.annexList).then((function(t){e.annexList=t,h["a"].createProblem({profession:e.profession?e.profession.id:"",time:e.time,line:e.line?e.line.id:"",station:e.station?e.station.id:"",address:e.address,category:e.category?e.category.id:"",level:e.level?e.level.id:"",source:e.source?e.source.id:"",images:JSON.stringify(e.imageList),videos:JSON.stringify(e.videoList),annex:JSON.stringify(e.annexList),finishTime:e.finishTime,summary:e.summary,description:e.description2,problemDesc:e.problemDesc,analysis:e.analysis,beginSolutions:e.beginSolutions,deviceCategory:e.deviceCategory?e.deviceCategory.id:"",carNo:e.carNo,contractor:e.contractor?e.contractor.id:"",contractorNoticeTime:e.contractorNoticeTime?e.contractorNoticeTime.substr(0,16)+":00":"",contractorReplyTime:e.contractorReplyTime?e.contractorReplyTime.substr(0,16)+":00":"",contractorBeginTime:e.contractorBeginTime?e.contractorBeginTime.substr(0,16)+":00":"",contractorFinishTime:e.contractorFinishTime?e.contractorFinishTime.substr(0,16)+":00":"",noRepairTime:e.noRepairTime,repairFinishTime:e.repairFinishTime?e.repairFinishTime.substr(0,16)+":00":""}).then((function(t){e.localId?m["a"].removeMyProblem(e.localId).then((function(){c["a"].back()})):c["a"].open("my_question")})).catch((function(t){e.$toast(t)}))}))}))})):this.localId?m["a"].updateMyProblem({profession:this.profession,time:this.time,line:this.line,station:this.station,address:this.address,category:this.category,level:this.level,source:this.source,images:this.imageList,videos:this.videoList,annex:this.annexList,finishTime:this.finishTime,summary:this.summary,description:this.description2,problemDesc:this.problemDesc,analysis:this.analysis,beginSolutions:this.beginSolutions,id:this.localId,deviceCategory:this.deviceCategory,carNo:this.carNo,contractor:this.contractor,contractorNoticeTime:this.contractorNoticeTime,contractorReplyTime:this.contractorReplyTime,contractorBeginTime:this.contractorBeginTime,contractorFinishTime:this.contractorFinishTime,noRepairTime:this.noRepairTime,repairFinishTime:this.repairFinishTime}).then((function(){alert("无法连接到网络，数据已保存，可在【我提报的问题】中找到并提交数据"),c["a"].back()})).catch((function(t){e.$toast(t)})):m["a"].saveMyProblem({profession:this.profession,time:this.time,line:this.line,station:this.station,address:this.address,category:this.category,level:this.level,source:this.source,images:this.imageList,videos:this.videoList,annex:this.annexList,finishTime:this.finishTime,summary:this.summary,description:this.description2,problemDesc:this.problemDesc,analysis:this.analysis,beginSolutions:this.beginSolutions,id:(new Date).getTime(),deviceCategory:this.deviceCategory,carNo:this.carNo,contractor:this.contractor,contractorNoticeTime:this.contractorNoticeTime,contractorReplyTime:this.contractorReplyTime,contractorBeginTime:this.contractorBeginTime,contractorFinishTime:this.contractorFinishTime,noRepairTime:this.noRepairTime,repairFinishTime:this.repairFinishTime}).then((function(){alert("无法连接到网络，数据已保存，可在【我提报的问题】中找到并提交数据"),c["a"].open("my_question")})).catch((function(t){e.$toast(t)})))},handleSave:function(){var e=this;null==this.line||null==this.station||""==this.time||null==this.source||""==this.description2||""==this.analysis||""==this.beginSolutions||null==this.profession||null==this.category||null==this.level||""==this.finishTime||null==this.deviceCategory?this.$toast.fail("请填写所有必填项,可填写无"):this.localId?m["a"].updateMyProblem({profession:this.profession,time:this.time,line:this.line,station:this.station,address:this.address,category:this.category,level:this.level,source:this.source,images:this.imageList,videos:this.videoList,annex:this.annexList,finishTime:this.finishTime,summary:this.summary,description:this.description2,problemDesc:this.problemDesc,analysis:this.analysis,beginSolutions:this.beginSolutions,id:this.localId,deviceCategory:this.deviceCategory,carNo:this.carNo,contractor:this.contractor,contractorNoticeTime:this.contractorNoticeTime,contractorReplyTime:this.contractorReplyTime,contractorBeginTime:this.contractorBeginTime,contractorFinishTime:this.contractorFinishTime,noRepairTime:this.noRepairTime,repairFinishTime:this.repairFinishTime}).then((function(){alert("保存成功"),c["a"].back()})).catch((function(t){e.$toast(t)})):m["a"].saveMyProblem({profession:this.profession,time:this.time,line:this.line,station:this.station,address:this.address,category:this.category,level:this.level,source:this.source,images:this.imageList,videos:this.videoList,annex:this.annexList,finishTime:this.finishTime,summary:this.summary,description:this.description2,problemDesc:this.problemDesc,analysis:this.analysis,beginSolutions:this.beginSolutions,id:(new Date).getTime(),deviceCategory:this.deviceCategory,carNo:this.carNo,contractor:this.contractor,contractorNoticeTime:this.contractorNoticeTime,contractorReplyTime:this.contractorReplyTime,contractorBeginTime:this.contractorBeginTime,contractorFinishTime:this.contractorFinishTime,noRepairTime:this.noRepairTime,repairFinishTime:this.repairFinishTime}).then((function(){alert("保存成功"),c["a"].open("my_question")})).catch((function(t){e.$toast(t)}))}}},b=T,y=i("2877"),S=Object(y["a"])(b,o,n,!1,null,null,null),k=S.exports,w=i("a1db");w["a"].init(k)},7:function(e,t,i){e.exports=i("1029")}});
//# sourceMappingURL=createProblem.ed27311a.js.map