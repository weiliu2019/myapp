(function(t){function e(e){for(var a,o,s=e[0],l=e[1],c=e[2],f=0,d=[];f<s.length;f++)o=s[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={transmit:0},r=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;r.push([39,"chunk-vendors","chunk-common"]),n()})({39:function(t,e,n){t.exports=n("ea7c")},"422e":function(t,e,n){},6626:function(t,e,n){},"71f2":function(t,e,n){"use strict";var a=n("422e"),i=n.n(a);i.a},"9f3f":function(t,e,n){"use strict";var a=n("6626"),i=n.n(a);i.a},ea7c:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page",{ref:"page",staticClass:"transmit-page create-action-page",attrs:{headerHeightVW:t.headerHeightVW,scrollbar:"",pullDownRefresh:!0,pullUpLoad:!0},on:{"on-ready":t.onReady,"on-refresh":t.onRefresh,"on-show":t.onShow,"on-load":t.onLoad}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("van-nav-bar",{attrs:{id:"header",title:"智能维修"}},[n("i",{staticClass:"icon-wode nav-icon-right",attrs:{slot:"right"},on:{click:t.handleToMe},slot:"right"})]),n("van-popup",{staticClass:"header-more",style:{top:t.moreTop+"vw"},model:{value:t.moreAction,callback:function(e){t.moreAction=e},expression:"moreAction"}},[n("div",{staticClass:"more-action"},[n("van-cell",{attrs:{title:"提报故障",clickable:""},nativeOn:{click:function(e){return t.handleCreateFault(e)}}}),n("van-cell",{attrs:{title:"提报问题",clickable:""},nativeOn:{click:function(e){return t.handleCreateProblem(e)}}})],1)]),n("div",{staticClass:"search-bar"},[n("van-search",{attrs:{placeholder:"搜索工单编号"},model:{value:t.filter.key,callback:function(e){t.$set(t.filter,"key",e)},expression:"filter.key"}})],1),n("van-dropdown-menu",{staticClass:"select-bar"},[n("van-dropdown-item",{attrs:{options:t.statusOptions},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}}),n("van-dropdown-item",{attrs:{options:t.sourceOptions},model:{value:t.filter.source,callback:function(e){t.$set(t.filter,"source",e)},expression:"filter.source"}}),n("van-dropdown-item",{ref:"time",attrs:{title:t.filter.time}},[n("van-datetime-picker",{attrs:{type:"year-month"},on:{cancel:t.onTimeCancel,confirm:t.onTimeConfirm},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)],1)],1),t.loading?n("van-loading",{staticClass:"page-loading",attrs:{type:"spinner"}}):t._e(),n("transition-group",{staticClass:"transmit-list",attrs:{tag:"div",name:"list"}},t._l(t.list,(function(e){return n("item",{key:e.id,attrs:{data:e},nativeOn:{click:function(n){return t.handleDetail(e)}}})})),1),n("template",{slot:"blank"},[n("div",{staticClass:"fault-action",on:{click:t.handleCreateFault}}),n("div",{staticClass:"problem-action",on:{click:t.handleCreateProblem}})])],2)},i=[],r=(n("d25f"),n("20d6"),n("9973")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"transmit-item"},[n("div",{staticClass:"item-header"},[n("div",{staticClass:"left"},[n("span",[t._v(t._s(t.data.no)+" 工单转交")])]),n("div",{staticClass:"right"},[n("span",{staticClass:"item-status"},[t._v(t._s(t.transmitStatusEnum[t.data.status]))])])]),n("div",{staticClass:"item-cell"},[n("div",{staticClass:"item-time1"},[t._v("发起时间："+t._s(t.data.time))])]),n("div",{staticClass:"item-cell"},[n("div",{staticClass:"item-time1"},[t._v("来源："+t._s(t.transmitSourceEnum[t.data.source]))])])])},s=[],l=n("08f3"),c={props:["data"],data:function(){return{transmitSourceEnum:l["f"],transmitStatusEnum:l["g"]}}},u=c,f=(n("71f2"),n("2877")),d=Object(f["a"])(u,o,s,!1,null,null,null),h=d.exports,m=n("c03e"),p=n("365c"),v=(n("8149"),n("c1df")),g=n.n(v),b={components:{Page:r["a"],Item:h},data:function(){return{headerHeightVW:17.6,moreAction:!1,moreTop:0,header:null,filter:{key:"",status:"",source:"",pageIndex:1,pageSize:10,time:g()().format("YYYY-MM")},transmitStatusEnum:l["g"],transmitSourceEnum:l["f"],list:[],loading:!0,statusOptions:[{text:"全部",value:""},{text:"待确认",value:"to_confirmed"},{text:"已接受",value:"accepted"},{text:"已拒绝",value:"rejected"}],sourceOptions:[{text:"全部",value:""},{text:"我发起的",value:"1"},{text:"我收到的",value:"2"}],time:new Date}},methods:{onReady:function(t,e){this.header=t,console.log(JSON.stringify(t)),console.log(JSON.stringify(e)),this.headerHeightVW=100*(this.header.h+95)/this.header.w,this.moreTop=100*this.header.h/this.header.w,this.onRefresh()},onMoreAction:function(){this.moreAction=!0},onShow:function(){var t=this;localStorage.getItem("refresh_transmit_id")&&p["a"].getTransmitListId({id:localStorage.getItem("refresh_transmit_id")}).then((function(e){var n=t.list.findIndex((function(t){return t.id==e.detail.id}));n>=0&&t.$set(t.list,n,e.detail),localStorage.setItem("refresh_transmit_id","")}))},onRefresh:function(){var t=this;this.filter.pageIndex=1,p["a"].getTransmitList(this.filter).then((function(e){t.list=e.list,t.filter.pageIndex++,t.$refs.page.finishRefresh(),t.loading=!1})).catch((function(e){t.$toast(e),t.$refs.page.finishRefresh(),t.loading=!1}))},onLoad:function(){var t=this;p["a"].getTransmitList(this.filter).then((function(e){t.list=t.list.concat(e.list),t.filter.pageIndex++,0==e.list.length?t.$refs.page.endLoad():t.$refs.page.updateLoad(),t.loading=!1})).catch((function(e){t.$toast(e),t.$refs.page.updateLoad(),t.loading=!1}))},handleDetail:function(t){localStorage.setItem("refresh_transmit_id",t.id),m["a"].open("transmitdetail",{id:t.id})},onTimeCancel:function(){this.$refs.time.toggle()},onTimeConfirm:function(t){console.log(t),this.filter.time=g()(t).format("YYYY-MM"),this.$refs.time.toggle(),this.onRefresh()},handleCreateFault:function(){this.moreAction=!1,m["a"].open("createFault")},handleCreateProblem:function(){this.moreAction=!1,m["a"].open("createProblem")},handleToMe:function(){m["a"].open("me")}},watch:{"filter.status":function(t){this.onRefresh()},"filter.source":function(t){this.onRefresh()}}},y=b,C=(n("9f3f"),Object(f["a"])(y,a,i,!1,null,null,null)),_=C.exports,x=n("a1db");x["a"].init(_)}});
//# sourceMappingURL=transmit.ef98e643.js.map