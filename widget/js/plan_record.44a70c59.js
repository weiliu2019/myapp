(function(e){function t(t){for(var i,o,c=t[0],d=t[1],l=t[2],u=0,v=[];u<c.length;u++)o=c[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&v.push(n[o][0]),n[o]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(e[i]=d[i]);s&&s(t);while(v.length)v.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,c=1;c<a.length;c++){var d=a[c];0!==n[d]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},n={plan_record:0},r=[];function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var s=d;r.push([31,"chunk-vendors","chunk-common"]),a()})({31:function(e,t,a){e.exports=a("b6a6")},b6a6:function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page",{ref:"page",staticClass:"plan-record-page common-page",attrs:{headerHeightVW:e.headerHeightVW,scrollbar:""},on:{"on-ready":e.onReady,"on-show":e.onShow}},[a("van-nav-bar",{attrs:{slot:"header",id:"header",title:"记录故障","left-arrow":""},on:{"click-left":e.onClickLeft},slot:"header"}),a("van-cell-group",[a("van-cell",{attrs:{required:"",title:"故障设备","is-link":"",clickable:""},on:{click:e.handleSelectDevice}},[e._v(e._s(e.deviceName?e.deviceName:"请选择"))]),a("van-field",{attrs:{placeholder:"设备序列号",type:"textarea",rows:1,autosize:""},model:{value:e.deviceNo,callback:function(t){e.deviceNo=t},expression:"deviceNo"}})],1),a("van-cell-group",[a("van-field",{attrs:{placeholder:"备注",type:"textarea",rows:2,autosize:""},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),a("div",{staticClass:"blank-empty"}),a("template",{slot:"blank"},[a("div",{staticClass:"footer-action"},[e.removeShow?a("div",{staticClass:"action-item",on:{click:e.handleRemove}},[a("i",{staticClass:"action-item-icon icon-shanchu"}),a("span",[e._v("删除")])]):e._e(),a("div",{staticClass:"action-item",on:{click:e.handleCancel}},[a("i",{staticClass:"action-item-icon icon-quxiao"}),a("span",[e._v("取消")])]),a("van-button",{staticClass:"action-item-main",attrs:{color:"#108EE9"},on:{click:e.handleSave}},[e._v("确认")])],1)])],2)},n=[],r=(a("7f7f"),a("9973")),o=a("c03e"),c=a("8149"),d=(a("698a"),a("08f3"),{components:{Page:r["a"]},data:function(){return{headerHeightVW:0,deviceId:"",deviceName:"",deviceNo:"",remark:"",id:"",index:null,editIndex:-1,removeShow:!1}},methods:{onReady:function(e,t){this.header=e,this.headerHeightVW=100*(this.header.h+1)/this.header.w,this.id=o["a"].getParam("id"),this.index=o["a"].getParam("index"),this.deviceId=o["a"].getParam("deviceId"),this.deviceName=o["a"].getParam("deviceName"),this.deviceNo=o["a"].getParam("deviceNo"),this.remark=o["a"].getParam("remark"),this.editIndex=o["a"].getParam("editIndex"),console.log(this.editIndex),this.editIndex>=0&&(this.removeShow=!0)},onShow:function(){if(localStorage.getItem("device_select")){var e=JSON.parse(localStorage.getItem("device_select"));this.deviceId=e.id,this.deviceName=e.name,this.deviceNo=e.serial,localStorage.setItem("device_select","")}},onClickLeft:function(){o["a"].back()},handleRemove:function(){var e=this;c["a"].getOrderDetail(this.id).then((function(t){e.editIndex>=0&&t.formList[e.index].faultList.splice(e.editIndex,1),c["a"].updateOrder(t).then((function(){o["a"].back()}))}))},handleSave:function(){var e=this;if(!this.deviceId)return this.$toast("请选择设备"),!1;c["a"].getOrderDetail(this.id).then((function(t){console.log(JSON.stringify(t)),e.editIndex?t.formList[e.index].faultList[e.editIndex]={deviceId:e.deviceId,deviceName:e.deviceName,deviceNo:e.deviceNo,remark:e.remark}:t.formList[e.index].faultList?t.formList[e.index].faultList.push({deviceId:e.deviceId,deviceName:e.deviceName,deviceNo:e.deviceNo,remark:e.remark}):t.formList[e.index].faultList=[{deviceId:e.deviceId,deviceName:e.deviceName,deviceNo:e.deviceNo,remark:e.remark}],c["a"].updateOrder(t).then((function(){o["a"].back()}))}))},handleSelectDevice:function(){o["a"].open("device",{category:"1"})},handleCancel:function(){o["a"].back()}}}),l=d,s=a("2877"),u=Object(s["a"])(l,i,n,!1,null,null,null),v=u.exports,h=a("a1db");h["a"].init(v)}});
//# sourceMappingURL=plan_record.44a70c59.js.map