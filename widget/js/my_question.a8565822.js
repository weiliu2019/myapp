(function(e){function t(t){for(var n,s,r=t[0],l=t[1],c=t[2],u=0,d=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);f&&f(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={my_question:0},o=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var f=l;o.push([22,"chunk-vendors","chunk-common"]),a()})({"089e":function(e,t,a){"use strict";var n=a("af91a"),i=a.n(n);i.a},22:function(e,t,a){e.exports=a("571a")},"571a":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page",{ref:"page",staticClass:"myproblem-page",attrs:{headerHeightVW:e.headerHeightVW,scrollbar:"",pullDownRefresh:!0,pullUpLoad:!0},on:{"on-ready":e.onReady,"on-show":e.onShow,"on-refresh":e.onRefresh,"on-load":e.onLoad}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("van-nav-bar",{attrs:{id:"header",title:"我提报的问题","left-arrow":""},on:{"click-left":e.onClickLeft}}),a("div",{staticClass:"search-bar"},[a("van-search",{attrs:{placeholder:"搜索问题编号、摘要"},model:{value:e.filter.key,callback:function(t){e.$set(e.filter,"key",t)},expression:"filter.key"}})],1),a("van-dropdown-menu",{staticClass:"select-bar"},[a("van-dropdown-item",{attrs:{options:e.statusOptions},model:{value:e.filter.status,callback:function(t){e.$set(e.filter,"status",t)},expression:"filter.status"}}),a("van-dropdown-item",{ref:"beginDate",attrs:{title:e.filter.beginDate}},[a("van-datetime-picker",{attrs:{type:"date"},on:{cancel:e.onBeginDateCancel,confirm:e.onBeginDateConfirm},model:{value:e.beginDate,callback:function(t){e.beginDate=t},expression:"beginDate"}})],1),a("van-dropdown-item",{ref:"endDate",attrs:{title:e.filter.endDate}},[a("van-datetime-picker",{attrs:{type:"date"},on:{cancel:e.onEndDateCancel,confirm:e.onEndDateConfirm},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)],1)],1),a("div",{staticClass:"myproblem-content"},e._l(e.list,(function(t){return a("div",{key:t.id,staticClass:"myproblem-item",on:{click:function(a){return e.handleDetail(t)}}},[a("div",{staticClass:"item-title"},[a("span",{staticClass:"item-num"},[e._v(e._s(t.no))]),"wait_assigned"==t.status?a("span",{staticClass:"item-status",staticStyle:{color:"#FFB105"}},[e._v("待受理")]):"following_up"==t.status?a("span",{staticClass:"item-status",staticStyle:{color:"#019933"}},[e._v("跟进中")]):"pending_review"==t.status?a("span",{staticClass:"item-status",staticStyle:{color:"#FFB105"}},[e._v("待审核")]):"close"==t.status?a("span",{staticClass:"item-status",staticStyle:{color:"#939496"}},[e._v("已关闭")]):"create"==t.status?a("span",{staticClass:"item-status"},[e._v("待提报")]):e._e()]),a("div",{staticClass:"item-content"},[e._v(e._s(t.description))]),a("div",{staticClass:"item-footer"},[a("van-icon",{attrs:{name:"clock-o"}}),a("span",{staticClass:"item-time"},[e._v("计划完成时间："+e._s(t.finishTime))]),a("span",{staticClass:"item-y-time"},[e._v(e._s(t.consumeTime)+"min")])],1)])})),0),e.loading?a("van-loading",{staticClass:"page-loading",attrs:{type:"spinner"}}):e._e()],1)},o=[],s=a("bd86"),r=a("75fc"),l=(a("d25f"),a("9973")),c=a("c03e"),f=a("365c"),u=a("8149"),d=a("c1df"),p=a.n(d),g={components:{Page:l["a"]},data:function(){return{headerHeightVW:17.6,header:null,filter:{id:"",key:"",status:"",pageIndex:1,pageSize:10,beginDate:p()().startOf("years").format("YYYY-MM-DD"),endDate:p()().endOf("years").format("YYYY-MM-DD")},list:[],localList:[],loading:!0,statusOptions:[{text:"全部",value:""},{text:"待受理",value:"wait_assigned"},{text:"跟进中",value:"following_up"},{text:"待审核",value:"pending_review"},{text:"已关闭",value:"close"}],beginDate:new Date,endDate:new Date}},methods:(n={onReady:function(e,t){this.header=e,this.headerHeightVW=100*(this.header.h+95)/this.header.w;var a=localStorage.getItem("user");this.filter.id=JSON.parse(a).id,this.onRefresh(),this.loadLocalData(),setTimeout((function(){c["a"].back("createProblem")}),600)},onShow:function(){this.loadLocalData()},onClickLeft:function(){c["a"].back()},onLoadConfig:function(){f["a"].getProblemConfig().then((function(e){localStorage.setItem("problem_level",JSON.stringify(e.level)),localStorage.setItem("problem_category",JSON.stringify(e.category)),localStorage.setItem("problem_flow",JSON.stringify(e.processflow)),localStorage.setItem("problem_address",JSON.stringify(e.address)),localStorage.setItem("problem_profession",JSON.stringify(e.profession)),localStorage.setItem("problem_source",JSON.stringify(e.source))}))},loadLocalData:function(){var e=this;this.localList=[],u["a"].getMyProblem().then((function(t){e.localList=t}))}},Object(s["a"])(n,"onShow",(function(){this.onRefresh()})),Object(s["a"])(n,"onRefresh",(function(){var e=this;this.filter.pageIndex=1,f["a"].getMyQuestion(this.filter).then((function(t){e.list=[].concat(Object(r["a"])(e.localList),Object(r["a"])(t.list)),e.filter.pageIndex++,e.$refs.page.finishRefresh(),e.loading=!1})).catch((function(t){e.$toast(t),e.$refs.page.finishRefresh(),e.loading=!1,e.list=e.localList}))})),Object(s["a"])(n,"onLoad",(function(){var e=this;f["a"].getMyQuestion(this.filter).then((function(t){e.list=e.list.concat(t.list),e.filter.pageIndex++,0==t.list.length?e.$refs.page.endLoad():e.$refs.page.updateLoad(),e.loading=!1})).catch((function(t){e.$toast(t),e.$refs.page.updateLoad(),e.loading=!1}))})),Object(s["a"])(n,"handleDetail",(function(e){"create"==e.status?c["a"].open("createProblem",{detail:e.id}):c["a"].open("problemdetail",{id:e.id})})),Object(s["a"])(n,"onBeginDateCancel",(function(){this.$refs.beginDate.toggle()})),Object(s["a"])(n,"onBeginDateConfirm",(function(e){console.log(e),this.filter.beginDate=p()(e).format("YYYY-MM-DD"),this.$refs.beginDate.toggle(),this.onRefresh()})),Object(s["a"])(n,"onEndDateCancel",(function(){this.$refs.endDate.toggle()})),Object(s["a"])(n,"onEndDateConfirm",(function(e){console.log(e),this.filter.endDate=p()(e).format("YYYY-MM-DD"),this.$refs.endDate.toggle(),this.onRefresh()})),n),watch:{"filter.status":function(e){this.onRefresh()}}},h=g,m=(a("089e"),a("2877")),b=Object(m["a"])(h,i,o,!1,null,null,null),v=b.exports,y=a("a1db");y["a"].init(v)},af91a:function(e,t,a){}});
//# sourceMappingURL=my_question.a8565822.js.map